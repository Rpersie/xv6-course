Read "Locking" with spinlock.c and skim mp.c